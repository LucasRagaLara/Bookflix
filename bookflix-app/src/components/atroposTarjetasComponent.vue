<template>
    <div class="mt-10 xl:flex-row xl:flex xl:items-center xl:justify-center xl:min-h-[60vh] xl:w-full xl:gap-x-28">
        <atropos-component
        activeOffset="100"
        class="atroposElement">
            <div class="atropos my-atropos xl:w-full xl:h-[45rem] rounded-xl flex flex-col lg:items-center lg:justify-center bg-[#006470] shadow-xl relative w-[90%] h-[42rem] lg:mx-0 mx-auto lg:mb-0 mb-10">
                <img src="../assets/tonos_azulrojo/tarjeta_azul/cita_azul.png" alt="" class="w-20 lg:absolute top-5 left-7 lg:ml-0 lg:mt-0 ml-6 my-3">
                <div class="atropos-scale">
                    <!-- rotate container (required) -->    
                    <div class="atropos-rotate">
                        <div class="atropos-inner">
                            <div class="items-center justify-center flex">
                                <p class="text-justify w-[85%] font-bold text-2xl mb-8 atropos-button-wrap" data-atropos-offset="2">¡Una joya escondida! Encontré aquí ediciones digitales de mis libros clásicos favoritos, y la experiencia de lectura es impecable. ¡Gracias por traer la magia de la literatura a mi pantalla!</p>
                            </div>

                            <div class="w-full items-center justify-center flex mb-5">
                                <img src="../assets/people/person1.jpg" alt="Esta es la primera persona" class="w-[30%] rounded-full border-[#008190] border-[5px]" data-atropos-offset="4">
                            </div>

                            <div class="w-full items-center justify-center flex flex-col">
                                <h1 class="font-bold text-2xl tracking-wide leading-normal" data-atropos-offset="5">Ana García</h1>
                                <img src="../assets/tonos_azulrojo/tarjeta_azul/4_estrellas.png" alt="Estas son las estrellas" class="w-[75%] z-10 relative" data-atropos-offset="2">
                            </div>
                        </div>

                    </div>
                </div>

                <div class="ocean">
                    <svg class="waves rounded-xl" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
                        <defs>
                            <path id="gentle-wave2" d="M0,40 C150,10 300,70 450,40 C600,10 750,70 900,40 C1050,10 1200,70 1350,40 C1500,10 1650,70 1800,40 V150 H0 V40 Z" />
                        </defs>
                        <g class="parallax">
                            <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(64,190,188,0.3)" />
                            <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(64,190,188,0.5)" />
                            <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(64,190,188,0.7)" />
                            <use xlink:href="#gentle-wave" x="48" y="7" fill="rgba(64,190,188,1.0)" />
                        </g>
                    </svg>
                </div>

            </div>
        </atropos-component>

        <atropos-component
        activeOffset="100"
        class="atroposElement">
            <div class="atropos my-atropos xl:w-full xl:h-[45rem] rounded-xl flex flex-col lg:items-center lg:justify-center bg-[#531318] shadow-xl relative w-[90%] h-[42rem] lg:mx-0 mx-auto lg:mb-0 mb-10">

                <img src="../assets/tonos_azulrojo/tarjeta_roja/cita_roja.png" alt="" class="w-20 lg:absolute top-5 left-7 lg:ml-0 lg:mt-0 ml-6 my-3">

                <div class="atropos-scale">
                    <!-- rotate container (required) -->
                    <div class="atropos-rotate">
                        <div class="atropos-inner">
                            <div class="items-center justify-center flex">
                                <p class="text-justify w-[85%] font-bold text-2xl mb-8" data-atropos-offset="2">Esta plataforma ha sido mi salvación para acceder a libros para mis estudios. La selección es amplia y la posibilidad de leer en cualquier momento y lugar ha hecho mi vida mucho más fácil.</p>
                            </div>
                            <!-- <div class="ocean">
                                <div class="wave"></div>
                            </div> -->
                            <div class="w-full items-center justify-center flex mb-5">
                                <img src="../assets/people/person2.jpg" alt="Esta es la primera persona" class="w-[30%] rounded-full border-[#7A1C24] border-[5px]" data-atropos-offset="4">
                            </div>

                            <div class="w-full items-center justify-center flex flex-col">
                                <h1 class="font-bold text-2xl tracking-wide leading-normal" data-atropos-offset="5">Alicia Fernández</h1>
                                <img src="../assets/tonos_azulrojo/tarjeta_roja/5_estrellas.png" alt="Estas son las estrellas" class="w-[75%] z-10 relative" data-atropos-offset="2">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="ocean">
                    <svg class="waves rounded-xl" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
                        <defs>
                            <path id="gentle-wave2" d="M0,40 C150,10 300,70 450,40 C600,10 750,70 900,40 C1050,10 1200,70 1350,40 C1500,10 1650,70 1800,40 V150 H0 V40 Z" />
                        </defs>
                        <g class="parallax">
                            <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(229,53,68,0.3)" />
                            <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(229,53,68,0.5)" />
                            <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(229,53,68,0.7)" />
                            <use xlink:href="#gentle-wave" x="48" y="7" fill="rgba(229,53,68,1.0)" />
                        </g>
                    </svg>
                </div>

            </div>

        </atropos-component>

        <atropos-component
        activeOffset="100"
        class="atroposElement">

            <div class="atropos my-atropos xl:w-full xl:h-[45rem] rounded-xl flex flex-col lg:items-center lg:justify-center bg-[#07372D] shadow-xl relative w-[90%] h-[42rem] lg:mx-0 mx-auto lg:mb-0 mb-10">

                <img src="../assets/tonos_azulrojo/tarjeta_verde/cita_verde.png" alt="" class="w-20 lg:absolute top-5 left-7 lg:ml-0 lg:mt-0 ml-6 my-3" data-atropos-offset="2">

                <div class="atropos-scale">
                    <!-- rotate container (required) -->
                    <div class="atropos-rotate">
                        <div class="atropos-inner">

                            <div class="items-center justify-center flex">
                                <p class="text-justify w-[85%] font-bold text-2xl lg:mb-8 mb-10" data-atropos-offset="2">Como lector, he encontrado aquí una fuente interminable de aventuras futuristas. Las recomendaciones siempre dan en el clavo y cada lectura es una experiencia emocionante.</p>
                            </div>
                            <!-- <div class="ocean">
                                <div class="wave"></div>
                            </div> -->
                            <div class="w-full items-center justify-center flex mb-5">
                                <img src="../assets/people/person3.jpg" alt="Esta es la primera persona" class="w-[30%] rounded-full border-[#135B4B] border-[5px]" data-atropos-offset="4">
                            </div>

                            <div class="w-full items-center justify-center flex flex-col">
                                <h1 class="font-bold text-2xl tracking-wide leading-normal" data-atropos-offset="5">Jung Hae-in</h1>
                                <img src="../assets/tonos_azulrojo/tarjeta_verde/5_estrellas.png" alt="Estas son las estrellas" class="w-[75%] z-10 relative" data-atropos-offset="2">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="ocean">
                    <svg class="waves rounded-xl" 
                    viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
                    <defs>
                        <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
                    </defs>
                        <g class="parallax">
                            <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(19,91,75,0.3)" />
                            <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(19,91,75,0.5)" />
                            <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(19,91,75,0.7)" />
                            <use xlink:href="#gentle-wave" x="48" y="7" fill="rgba(19,91,75,1.0)" />
                        </g>
                    </svg>
                </div>

            </div>

        </atropos-component>
       
    </div>  
</template>

<script>
import Atropos from 'atropos';

export default {
    data() {
        return {
            atroposInstances: [] 
        };
    },
    mounted() {
        this.$nextTick(() => {
            const elements = document.querySelectorAll('.atroposElement');
            elements.forEach(el => {
                const instance = Atropos({ 
                    el: el,
                    activeOffset: 0,
                    shadow: false,
                    shadowOffset: false,
                    shadowScale: false,
                    highlight: false,
                    rotateXMax: 5,
                    rotateYMax: 5,
                    rotateLock: false,
                    commonOrigin: false
                });
                this.atroposInstances.push(instance);
            });
            // console.log(this.atroposInstances);
        });
    },
    beforeUnmount() { 
        this.atroposInstances.forEach(instance => {
            instance.destroy();
        });
    }
}
</script>

<style lang="scss" scoped>

    atropos-component{
        width: 23%;
    }


    .ocean {
        height: 40%;
        width: 100%;
        position: absolute;
        bottom: 0;
        left: 0;
        overflow: hidden;
    }

    .waves {
        position:absolute;
        width: 100%;
        height:15vh;
        min-height:100px;
        max-height:150px;
        bottom: 0;
    }

    .content {
        position:relative;
        height:20vh;
        bottom: 0;
        background-color: rgb(0, 0, 0);
    }

    .parallax > use {
        animation: move-forever 5s cubic-bezier(.55,.5,.45,.5) infinite;
    }
    .parallax > use:nth-child(1) {
        animation-delay: -2s;
        animation-duration: 11s;
    }
    .parallax > use:nth-child(2) {
        animation-delay: -3s;
        animation-duration: 10s;
    }
    .parallax > use:nth-child(3) {
        animation-delay: -4s;
        animation-duration: 8s;
    }
    .parallax > use:nth-child(4) {
        animation-delay: -5s;
        animation-duration: 6s;
    }

    @keyframes move-forever {
    0% {
        transform: translate3d(-90px,0,0);
    }
    100% { 
        transform: translate3d(85px,0,0);
    }
    }

    @media (max-width: 768px) {
    .waves {
        height:40px;
        min-height:40px;
    }
    .content {
        height:30vh;
    }
    h1 {
        font-size:24px;
    }
    }

</style>